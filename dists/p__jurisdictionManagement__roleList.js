(self["webpackChunkant_design_pro"]=self["webpackChunkant_design_pro"]||[]).push([[603],{73171:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},c=a,u=n(27029),i=function(e,t){return r.createElement(u.Z,Object.assign({},e,{ref:t,icon:c}))};i.displayName="DeleteOutlined";var s=r.forwardRef(i)},91808:function(e){e.exports={parameter:"parameter___2A22Z",operate:"operate___tZ3f0"}},24846:function(){},61834:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return re}});n(12399);var r=n(82404),a=(n(36805),n(40574)),c=(n(43623),n(28930)),u=(n(13753),n(48429)),i=(n(5317),n(87555)),s=(n(77111),n(49194)),o=(n(52222),n(65507)),l=(n(14943),n(74356)),p=(n(14643),n(92909)),d=n(68699),f=n(44742),m=(n(26780),n(46567)),h=n(94043),Z=n.n(h),v=n(67294),y=n(49473),b={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},w=b,x=n(27029),k=function(e,t){return v.createElement(x.Z,Object.assign({},e,{ref:t,icon:w}))};k.displayName="CaretRightOutlined";var g=v.forwardRef(k),E=n(1870),C=n(8212),N=n(73171),O=n(24616),S=n(13378),I=(n(68137),n(50532)),D=(n(67604),n(66498)),z={labelCol:{span:4},wrapperCol:{span:20}},P={roleName:[{required:!0,message:"\u8bf7\u8f93\u5165\u89d2\u8272\u540d\u79f0!"}],roleDesc:[{required:!0,message:"\u8bf7\u8f93\u5165\u89d2\u8272\u63cf\u8ff0!"}]},R=function(e){var t=e.modalVisible,n=e.onCancel,r=e.alterAdd,a=e.amendData,c=e.addRoleLists,u=D.Z.useForm(),i=(0,f.Z)(u,1),s=i[0],o=function(){s.validateFields().then((function(e){c(e),console.log(e)}))};return(0,v.useEffect)((function(){console.log("aa"),r?(console.log(1),s.setFieldsValue({roleName:a.roleName,roleDesc:a.roleDesc})):s.resetFields()})),v.createElement(m.Z,{destroyOnClose:!0,title:r?"\u4fee\u6539\u89d2\u8272":"\u6dfb\u52a0\u89d2\u8272",visible:t,onCancel:function(){return n()},okText:r?"\u4fee\u6539":"\u6dfb\u52a0",onOk:o},v.createElement(D.Z,(0,S.Z)({form:s},z,{name:"basic",initialValues:{remember:!0}}),v.createElement(D.Z.Item,{label:"\u89d2\u8272\u540d\u79f0",name:"roleName",rules:P.roleName},v.createElement(I.Z,null)),v.createElement(D.Z.Item,{label:"\u89d2\u8272\u63cf\u8ff0",name:"roleDesc",rules:P.roleDesc},v.createElement(I.Z,null))))},j=R,_=(n(87753),n(82403)),V=function(e){var t=e.modalVisible,n=e.onCancel,r=e.AllocationJurisdiction,a=e.jurisdictionLists,c=e.setRole,u=(0,v.useState)([]),i=(0,f.Z)(u,2),s=i[0],o=i[1],l=(0,v.useState)(!0),p=(0,f.Z)(l,2),d=p[0],h=p[1],Z=function(e){h(!1),o(e)},y=function(){c(s.join(","))};return(0,v.useEffect)((function(){d&&o(a)})),v.createElement(m.Z,{destroyOnClose:!0,title:"\u5206\u914d\u6743\u9650",visible:t,onCancel:function(){return n()},onOk:y},v.createElement(_.Z,{checkable:!0,onCheck:Z,checkedKeys:s,treeData:r}))},A=V,L=n(2138);function F(){return H.apply(this,arguments)}function H(){return H=(0,d.Z)(Z().mark((function e(){return Z().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,L.ZP)("roles"));case 1:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function T(e){return M.apply(this,arguments)}function M(){return M=(0,d.Z)(Z().mark((function e(t){return Z().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,L.ZP)("roles",{method:"post",data:t}));case 1:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}function q(e){return B.apply(this,arguments)}function B(){return B=(0,d.Z)(Z().mark((function e(t){return Z().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,L.ZP)("roles/".concat(t.id),{method:"put",data:t.param}));case 1:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function J(e){return K.apply(this,arguments)}function K(){return K=(0,d.Z)(Z().mark((function e(t){return Z().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,L.ZP)("roles/".concat(t),{method:"delete"}));case 1:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}function Y(e){return G.apply(this,arguments)}function G(){return G=(0,d.Z)(Z().mark((function e(t){return Z().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,L.ZP)("roles/".concat(t.recordIds,"/rights/").concat(t.itemId),{method:"delete"}));case 1:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function Q(){return U.apply(this,arguments)}function U(){return U=(0,d.Z)(Z().mark((function e(){return Z().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,L.ZP)("rights/tree",{method:"get"}));case 1:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}function W(e){return X.apply(this,arguments)}function X(){return X=(0,d.Z)(Z().mark((function e(t){return Z().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,L.ZP)("roles/".concat(t.setRoleId,"/rights"),{method:"post",data:{rids:t.jurisdictionId}}));case 1:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}var $=n(91808),ee=n.n($),te=m.Z.confirm,ne=function(){var e=(0,v.useState)([]),t=(0,f.Z)(e,2),n=t[0],m=t[1],h=(0,v.useState)(!1),b=(0,f.Z)(h,2),w=b[0],x=b[1],k=(0,v.useState)(!1),S=(0,f.Z)(k,2),I=S[0],D=S[1],z=(0,v.useState)({}),P=(0,f.Z)(z,2),R=P[0],_=P[1],V=(0,v.useState)(!1),L=(0,f.Z)(V,2),H=L[0],M=L[1],B=(0,v.useState)([]),K=(0,f.Z)(B,2),G=K[0],U=K[1],X=(0,v.useState)([]),$=(0,f.Z)(X,2),ne=$[0],re=$[1],ae=(0,v.useState)(),ce=(0,f.Z)(ae,2),ue=ce[0],ie=ce[1],se=[],oe=function e(t,n){t.map((function(t,r){n&&(se.push(t.id),re(se));var a=t;return a.key=t.id,a.key2=r+1,a.title=t.authName,t.children&&e(t.children,n),a}))},le=function(){var e=(0,d.Z)(Z().mark((function e(){var t;return Z().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F();case 2:t=e.sent,200===t.meta.status&&(oe(t.data,!1),m(t.data));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=(0,d.Z)(Z().mark((function e(t,n,r){return Z().wrap((function(e){while(1)switch(e.prev=e.next){case 0:r.preventDefault(),te({title:"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u89d2\u8272\u6b64\u9650\u6743?",icon:v.createElement(E.Z,{style:{color:"red"}}),okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){var e=(0,d.Z)(Z().mark((function e(){var r,a,c;return Z().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.id,e.next=3,Y({recordIds:r,itemId:n});case 3:if(a=e.sent,c=a.meta,200===c.status){e.next=7;break}return e.abrupt("return",p.default.error(c.msg));case 7:return p.default.success("\u5220\u9664\u8be5\u9650\u6743\u6210\u529f"),le(),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}(),onCancel:function(){}});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),de=function(){x(!1),M(!1),re([])},fe=function(e,t){x(!0),D(e),e&&_(t)},me=function(){var e=(0,d.Z)(Z().mark((function e(t){var n,r;return Z().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,J(t.id);case 2:if(n=e.sent,r=n.meta,200===r.status){e.next=6;break}return e.abrupt("return",p.default.error(r.msg));case 6:return p.default.success("\u5220\u9664\u6210\u529f"),le(),e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=(0,d.Z)(Z().mark((function e(t){var n,r,a,c,u;return Z().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(I){e.next=10;break}return e.next=3,T(t);case 3:if(n=e.sent,r=n.meta,201===r.status){e.next=7;break}return e.abrupt("return",p.default.error(r.msg));case 7:p.default.success("\u89d2\u8272\u521b\u5efa\u6210\u529f"),e.next=18;break;case 10:return a=R.id,e.next=13,q({id:a,param:t});case 13:if(c=e.sent,u=c.meta,200===u.status){e.next=17;break}return e.abrupt("return",p.default.error(u.msg));case 17:p.default.success("\u89d2\u8272\u4fee\u6539\u6210\u529f");case 18:return x(!1),le(),e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ze=function(){var e=(0,d.Z)(Z().mark((function e(t){var n,r,a;return Z().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return ie(t.id),M(!0),oe(t.children,!0),e.next=5,Q();case 5:if(n=e.sent,r=n.data,a=n.meta,200===a.status){e.next=10;break}return e.abrupt("return",p.default.error(a.msg));case 10:return oe(r,!1),U(r),e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=(0,d.Z)(Z().mark((function e(t){var n,r;return Z().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,W({setRoleId:ue,jurisdictionId:t});case 2:if(n=e.sent,r=n.meta,200===r.status){e.next=6;break}return e.abrupt("return",p.default.error(r.msg));case 6:return p.default.success("\u6388\u6743\u6210\u529f"),M(!1),le(),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,v.useEffect)((function(){le()}),[]);var ye=function(e,t){return e.children.map((function(n,r){var a=null;return a=n.children?v.createElement(i.Z,{key:n.id,className:ee().parameter},v.createElement(o.Z,{span:5},v.createElement(l.Z,{color:"blue",closable:!0,onClose:function(e){return pe(t,n.id,e)}},n.authName),v.createElement(g,{style:{fontSize:"11px"}})),v.createElement(o.Z,{span:19},ye(n,t)),e.children.length===r+1?"":v.createElement(s.Z,null)):v.createElement(l.Z,{color:"orange",closable:!0,key:n.id,onClose:function(e){return pe(t,n.id,e)}},n.authName),a}))},be=v.createElement(u.Z,{type:"primary",onClick:function(){return fe(!1,null)}},"\u6dfb\u52a0\u89d2\u8272"),we=[{title:"",dataIndex:"key2",key:"key2",width:50},{title:"\u89d2\u8272\u540d\u79f0",dataIndex:"roleName",key:"roleName"},{title:"\u89d2\u8272\u63cf\u8ff0",dataIndex:"roleDesc",key:"roleDesc"},{title:"\u64cd\u4f5c",dataIndex:"",key:"x",width:320,render:function(e,t){return v.createElement("div",{className:ee().operate},v.createElement(u.Z,{type:"link",icon:v.createElement(C.Z,{style:{fontSize:"13px"}}),size:"small",onClick:function(){return fe(!0,t)}},"\u7f16\u8f91"),v.createElement(c.Z,{placement:"topRight",title:"\u786e\u5b9a\u8981\u5220\u9664\u8be5\u89d2\u8272\u5417",onConfirm:function(){return me(e)},icon:v.createElement(E.Z,{style:{color:"red"}})},v.createElement(u.Z,{type:"link",danger:!0,icon:v.createElement(N.Z,{style:{fontSize:"13px"}}),size:"small"},"Delete")),v.createElement(u.Z,{type:"link",icon:v.createElement(O.Z,{style:{fontSize:"13px"}}),size:"small",onClick:function(){return Ze(t)}},"\u5206\u914d\u6743\u9650"))}}];return v.createElement(y.Oc,null,v.createElement(r.Z,{bordered:!1,title:be},v.createElement(a.Z,{columns:we,bordered:!0,expandable:{childrenColumnName:" ",expandedRowRender:function(e){return v.createElement("div",{style:{margin:0}},ye(e,e))},rowExpandable:function(e){return e.children.length>0}},dataSource:n,pagination:{hideOnSinglePage:!0}}),v.createElement(j,{modalVisible:w,onCancel:de,alterAdd:I,amendData:R,addRoleLists:he}),v.createElement(A,{modalVisible:H,onCancel:de,AllocationJurisdiction:G,jurisdictionLists:ne,setRole:ve})))},re=ne},49194:function(e,t,n){"use strict";var r=n(3066),a=n(4763),c=n(67294),u=n(35510),i=n.n(u),s=n(67170),o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},l=function(e){return c.createElement(s.C,null,(function(t){var n,u=t.getPrefixCls,s=t.direction,l=e.prefixCls,p=e.type,d=void 0===p?"horizontal":p,f=e.orientation,m=void 0===f?"center":f,h=e.className,Z=e.children,v=e.dashed,y=e.plain,b=o(e,["prefixCls","type","orientation","className","children","dashed","plain"]),w=u("divider",l),x=m.length>0?"-".concat(m):m,k=!!Z,g=i()(w,"".concat(w,"-").concat(d),(n={},(0,a.Z)(n,"".concat(w,"-with-text"),k),(0,a.Z)(n,"".concat(w,"-with-text").concat(x),k),(0,a.Z)(n,"".concat(w,"-dashed"),!!v),(0,a.Z)(n,"".concat(w,"-plain"),!!y),(0,a.Z)(n,"".concat(w,"-rtl"),"rtl"===s),n),h);return c.createElement("div",(0,r.Z)({className:g},b,{role:"separator"}),Z&&c.createElement("span",{className:"".concat(w,"-inner-text")},Z))}))};t["Z"]=l},77111:function(e,t,n){"use strict";n(43673),n(24846)}}]);